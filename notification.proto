syntax = "proto3";

option csharp_namespace = "Grpc.Common.Notification";

package notifcation;

service NotificationService {
    rpc Ping (PingRequest) returns (PingResponse);  

    rpc SendRegistrationEmail (RegistrationEmailRequest) returns (NotificationResponse);

    rpc SendFeedNotification (FeedNotificationMessage) returns (Empty);
    rpc FeedSubscribe (FeedSubscribeRequest) returns (stream FeedNotificationMessage);
}

message PingRequest {

}

message PingResponse {
    bool success = 1;
}

message RegistrationEmailRequest {
  int32 userId = 1;
  string token = 2;
  string verificationLink = 3;
}

message NotificationResponse {
  bool success = 1;
  string message = 2;
}

message FeedNotificationRequest {
  string fromUserId = 1;
  string toUserId = 2;
  string feedId = 3;
  string type = 4; // "like" or "comment"
}

message FeedSubscribeRequest {
  string userId = 1;
}

message FeedNotificationMessage {
  string toUserId = 1;
  string fromUser = 2;
  string type = 3; // pl. "like" vagy "comment"
  string message = 4;
}


message Empty {

}
